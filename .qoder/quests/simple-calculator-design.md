# 简单计算器程序设计文档

## 一、系统概述

基于命令行的简单计算器,支持基础四则运算(加、减、乘、除),提供交互式计算服务。

## 二、功能设计

### 2.1 核心功能

- 加法、减法、乘法、除法运算
- 命令行交互(输入数字和运算符,显示结果)
- 输入验证(数字格式、除零检测)
- 支持连续计算

### 2.2 用户交互流程

``mermaid
flowchart TD
    Start[程序启动] --> Welcome[显示欢迎信息]
    Welcome --> ShowMenu[显示操作菜单]
    ShowMenu --> GetOperation[获取用户选择的运算类型]
    GetOperation --> CheckExit{是否退出?}
    CheckExit -->|是| Exit[程序结束]
    CheckExit -->|否| GetNum1[获取第一个数字]
    GetNum1 --> ValidateNum1{输入有效?}
    ValidateNum1 -->|否| ErrorMsg1[显示错误提示] --> GetNum1
    ValidateNum1 -->|是| GetNum2[获取第二个数字]
    GetNum2 --> ValidateNum2{输入有效?}
    ValidateNum2 -->|否| ErrorMsg2[显示错误提示] --> GetNum2
    ValidateNum2 -->|是| Calculate[执行计算]
    Calculate --> CheckDivZero{除法且除数为零?}
    CheckDivZero -->|是| DivZeroError[显示除零错误] --> ShowMenu
    CheckDivZero -->|否| ShowResult[显示计算结果]
    ShowResult --> Continue{继续计算?}
    Continue -->|是| ShowMenu
    Continue -->|否| Exit
```

## 三、系统架构

### 3.1 组件设计

| 组件名称 | 职责描述 |
|---------|----------|
| 主程序 | 控制交互流程,循环处理用户请求 |
| 计算器核心 | 实现四则运算逻辑 |
| 输入验证 | 验证数字格式和运算符有效性 |
| 异常处理 | 处理除零、非法输入等异常 |

## 四、数据设计

| 数据项 | 数据类型 | 说明 |
|-------|---------|------|
| 操作数 | double | 支持小数运算 |
| 运算符 | int | 1-加法 2-减法 3-乘法 4-除法 0-退出 |
| 计算结果 | double | 运算结果 |

## 五、交互设计

### 5.1 用户交互流程

1. 显示菜单,选择运算类型(1-加 2-减 3-乘 4-除 0-退出)
2. 输入第一个数字
3. 输入第二个数字
4. 显示计算结果
5. 询问是否继续

### 5.2 错误处理

| 错误类型 | 提示信息 |
|---------|----------|
| 非法运算符 | 无效的运算类型,请重新选择 |
| 非数字输入 | 输入格式不正确,请输入有效数字 |
| 除数为零 | 除数不能为零 |

## 六、异常处理

| 异常类型 | 处理策略 |
|---------|----------|
| 非法数字格式 | 捕获异常,提示重新输入 |
| 除零异常 | 运算前检查,提示错误 |
| 非法运算符 | 验证输入,提示重新选择 |

## 七、测试要点

| 测试类型 | 测试内容 |
|---------|----------|
| 功能测试 | 四则运算正确性(正数、负数、小数) |
| 异常测试 | 除零处理、非法输入处理 |
| 交互测试 | 连续计算、退出功能 |

## 八、技术要求

- 编程语言: Java 8及以上
- 交互方式: 命令行标准输入输出
- 数值类型: double
- 依赖库: 仅使用Java标准库

## 九、实现要点

1. 创建计算器核心类,实现四则运算方法
2. 使用Scanner读取用户输入
3. 实现输入验证(数字格式、运算符合法性)
4. 构建主程序循环(菜单-输入-计算-显示结果)
5. 添加异常处理(除零检测、输入格式验证)
6. 编写测试用例验证功能
